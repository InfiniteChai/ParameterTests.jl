<!DOCTYPE html>
<html lang="en"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><title>Getting Started · ParameterTests.jl</title><link href="https://fonts.googleapis.com/css?family=Lato|Roboto+Mono" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.0/css/fontawesome.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.0/css/solid.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.0/css/brands.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.11.1/katex.min.css" rel="stylesheet" type="text/css"/><script>documenterBaseURL=".."</script><script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js" data-main="../assets/documenter.js"></script><script src="../siteinfo.js"></script><script src="../../versions.js"></script><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/documenter-dark.css" data-theme-name="documenter-dark" data-theme-primary-dark/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../assets/themes/documenter-light.css" data-theme-name="documenter-light" data-theme-primary/><script src="../assets/themeswap.js"></script></head><body><div id="documenter"><nav class="docs-sidebar"><div class="docs-package-name"><span class="docs-autofit">ParameterTests.jl</span></div><form class="docs-search" action="../search/"><input class="docs-search-query" id="documenter-search-query" name="q" type="text" placeholder="Search docs"/></form><ul class="docs-menu"><li><a class="tocitem" href="../">Introduction</a></li><li class="is-active"><a class="tocitem" href>Getting Started</a><ul class="internal"><li><a class="tocitem" href="#Encoding-Example"><span>Encoding Example</span></a></li><li><a class="tocitem" href="#Sampling-Multiple-Variables"><span>Sampling Multiple Variables</span></a></li><li><a class="tocitem" href="#Parameter-Settings"><span>Parameter Settings</span></a></li><li><a class="tocitem" href="#Parameter-Testing"><span>Parameter Testing</span></a></li></ul></li></ul><div class="docs-version-selector field has-addons"><div class="control"><span class="docs-label button is-static is-size-7">Version</span></div><div class="docs-selector control is-expanded"><div class="select is-fullwidth is-size-7"><select id="documenter-version-selector"></select></div></div></div></nav><div class="docs-main"><header class="docs-navbar"><nav class="breadcrumb"><ul class="is-hidden-mobile"><li class="is-active"><a href>Getting Started</a></li></ul><ul class="is-hidden-tablet"><li class="is-active"><a href>Getting Started</a></li></ul></nav><div class="docs-right"><a class="docs-edit-link" href="https://github.com/InfiniteChai/ParameterTests.jl/blob/master/docs/src/getting_started.md" title="Edit on GitHub"><span class="docs-icon fab"></span><span class="docs-label is-hidden-touch">Edit on GitHub</span></a><a class="docs-settings-button fas fa-cog" id="documenter-settings-button" href="#" title="Settings"></a><a class="docs-sidebar-button fa fa-bars is-hidden-desktop" id="documenter-sidebar-button" href="#"></a></div></header><article class="content" id="documenter-page"><h1 id="Getting-Started"><a class="docs-heading-anchor" href="#Getting-Started">Getting Started</a><a id="Getting-Started-1"></a><a class="docs-heading-anchor-permalink" href="#Getting-Started" title="Permalink"></a></h1><p>Let&#39;s now walk through an example to get started with your first parameter tests</p><h2 id="Encoding-Example"><a class="docs-heading-anchor" href="#Encoding-Example">Encoding Example</a><a id="Encoding-Example-1"></a><a class="docs-heading-anchor-permalink" href="#Encoding-Example" title="Permalink"></a></h2><p>Let&#39;s suppose we&#39;re writing a <a href="https://en.wikipedia.org/wiki/Run-length_encoding">run length encoding</a> algorithm and we want to test it out.</p><p>Our first attempt is going to take the <a href="https://rosettacode.org/wiki/Run-length_encoding#Julia">Rosetta Code</a> implementation</p><pre><code class="language-julia">using IterTools: groupby
encode(str::String) = collect((length(g), first(g)) for g in groupby(first, str))
decode(cod::Vector) = join(repeat(&quot;$l&quot;, n) for (n, l) in cod)</code></pre><p>We now want to start writing some tests for this that will check the invariance of these functions. The invariant we normally associate with these algorithms is that if you decode what you encoded, you get back the same value.</p><p>Let&#39;s give that a go with sample testing on strings</p><pre><code class="language-julia">using Test
using ParameterTests

@paramtest &quot;Decode Inverts Encode&quot; begin
  @given s ∈ strings(:alphanum; maxsize=10)
  @test decode(encode(s)) == s
end</code></pre><p>This test is calling a search strategy for alphanumeric strings (up to 10 characters in length by default). If we run this, we&#39;ll see that we&#39;ve now sampled from 100 strings and all pass.</p><pre><code class="language-none">Test Summary:         | Pass  Total
Decode Inverts Encode |  100    100</code></pre><p>So let&#39;s introduce a bug to our decode method.</p><pre><code class="language-julia">decode(cod::Vector) = join(repeat(&quot;$l&quot;, n+1) for (n, l) in cod)</code></pre><p>Then let&#39;s rerun our tests. We now see that only 13 of the 100 samples are actually passing, which is for those with an empty string.</p><p>For the failed samples, we also print out details on the parameters and the test that failed. We see that our string of <code>qNu</code> is an example failure, since we&#39;re decoding this back to <code>qqNNuu</code>!</p><pre><code class="language-none">Decode Inverts Encode: [s=qNu]
Test Failed at none:5
  Expression: decode(encode(s)) == s
   Evaluated: &quot;qqNNuu&quot; == &quot;qNu&quot;
Test Summary:         | Pass  Fail  Total
Decode Inverts Encode |   13    87    100
ERROR: Some tests did not pass: 13 passed, 87 failed, 0 errored, 0 broke</code></pre><p>Note that your results may differ since we are randomly sampling, based on the seed set by <code>Test</code>.</p><h2 id="Sampling-Multiple-Variables"><a class="docs-heading-anchor" href="#Sampling-Multiple-Variables">Sampling Multiple Variables</a><a id="Sampling-Multiple-Variables-1"></a><a class="docs-heading-anchor-permalink" href="#Sampling-Multiple-Variables" title="Permalink"></a></h2><p>We do not restrict to a single sample set. You can join these together as required, so to sample two independent integers we can run the following</p><pre><code class="language-julia">@paramtest &quot;Multiple Variables&quot; begin
  @given a ∈ integers(), b ∈ integers()
  @test a + b == b + a
end</code></pre><p>This is equivalent to writing them on two separate lines as follows.</p><pre><code class="language-julia">@paramtest &quot;Multiple Variables&quot; begin
  @given a ∈ integers()
  @given b ∈ integers()
  @test a + b == b + a
end</code></pre><p>While it is also possible to put the <code>@given</code> statements anywhere within the block (due to how we define them) we recommend <em>NOT</em> doing the following and defining them at the top of your test set.</p><pre><code class="language-julia">@paramtest &quot;Multiple Variables&quot; begin
  @test a + b == b + a
  @given a ∈ integers()
  @given b ∈ integers()
end</code></pre><h2 id="Parameter-Settings"><a class="docs-heading-anchor" href="#Parameter-Settings">Parameter Settings</a><a id="Parameter-Settings-1"></a><a class="docs-heading-anchor-permalink" href="#Parameter-Settings" title="Permalink"></a></h2><p>Depending on what your testing, it can be useful to control the settings of parameter. These are exposed via the <code>ParamTestSettings</code> structure and can be set in the <code>@paramtest</code> macro. For example, to set the number of random samples to 500 we can just do this</p><pre><code class="language-julia">@paramtest &quot;Samples&quot; samples=500 begin
    @given a ∈ integers(), b ∈ integers()  
    @test a + b == b + a
end</code></pre><h2 id="Parameter-Testing"><a class="docs-heading-anchor" href="#Parameter-Testing">Parameter Testing</a><a id="Parameter-Testing-1"></a><a class="docs-heading-anchor-permalink" href="#Parameter-Testing" title="Permalink"></a></h2><p>While the sampling functions are very useful, this package also provides basic parameter testing. That means that you can run the same test over different parameters and report the results. This works in a similar fashion to sampling, except its restricted to the parameters you define.</p><p>As an example, let&#39;s test our encode example on a few different explicit cases</p><pre><code class="language-julia">@paramtest &quot;Decode Inverts Encode&quot; begin
  @given s ∈ [&quot;&quot;,&quot;\n&quot;,&quot;a\na&quot;]
  @test decode(encode(s)) == s
end</code></pre><p>We just use iterators for our test cases, so we can also combine our specific examples with a sampling set as well!</p><pre><code class="language-julia">@paramtest &quot;Decode Inverts Encode&quot; begin
  @given s ∈ Iterators.flatten(([&quot;&quot;, &quot;\n&quot;, &quot;a\nb&quot;], strings(:alphanum; maxsize=10)))
  @test decode(encode(s)) == s
end</code></pre></article><nav class="docs-footer"><a class="docs-footer-prevpage" href="../">« Introduction</a><div class="flexbox-break"></div><p class="footer-message">Powered by <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> and the <a href="https://julialang.org/">Julia Programming Language</a>.</p></nav></div><div class="modal" id="documenter-settings"><div class="modal-background"></div><div class="modal-card"><header class="modal-card-head"><p class="modal-card-title">Settings</p><button class="delete"></button></header><section class="modal-card-body"><p><label class="label">Theme</label><div class="select"><select id="documenter-themepicker"><option value="documenter-light">documenter-light</option><option value="documenter-dark">documenter-dark</option></select></div></p><hr/><p>This document was generated with <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> on <span class="colophon-date" title="Sunday 2 May 2021 15:56">Sunday 2 May 2021</span>. Using Julia version 1.0.5.</p></section><footer class="modal-card-foot"></footer></div></div></div></body></html>
